ORG 0000H ;
MOV A, 11111100B ;
MOV SP, #32h	
MOV R4, #0;
JMP LOOP
ORG 0030h
	
LOOP: 
SETB P1.0;
SETB P1.1;
MOV P2, A ;
JNB P1.0, PI;
JNB P1.1, PO;
CALL DELAY ;
RL A ;
SJMP LOOP ;

DELAY:
MOV R3, #4 ; 

LOOP1:MOV R1, #250 ; loop 250

LOOP2:MOV R2, #250 ; loop 250
DJNZ R2, $;
DJNZ R1, LOOP2 ;
DJNZ R3, LOOP1 ;
RET ; 

PI:CALL DELAY ;
INC R4;
MOV R0, A;
PUSH 00H;
JMP LOOP ;

PO:CALL DELAY ;
MOV A, 00000000B;
POP 00H;
MOV P2, R0;
DJNZ R4, PO;

END;